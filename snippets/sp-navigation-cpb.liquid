{% comment %}my-accordion.jsの読み込み{% endcomment %}
<script src="{{ 'my-accordion.js' | asset_url }}" defer="defer"></script>

<!-- SP ナビメニュー -->
<div class="sp-only">
  <my-accordion>
    <ul class="tw-bg-gray-900 tw-text-white tw-my-10 tw-p-0">
      {% for link in linklists['cpb-nav-menu'].links %}
        <li class="tw-w-full">
          {% if link.links.size == 0 %}
            <a href="{{ link.url }}"
               class="tw-flex tw-justify-between tw-items-center tw-p-4 tw-bg-black tw-text-white tw-no-underline">
              <span>{{ link.title }}</span>
              <span class="tw-inline-flex tw-text-white">{% render 'icon-chevron-right', width: 14, height: 14 %}</span>
            </a>
          {% else %}
            <div
                class="my-accordion tw-w-full tw-text-left tw-flex tw-justify-between tw-items-center tw-p-4 tw-bg-black tw-text-white">
              <span>{{ link.title }}</span>
              <span class="tw-inline-flex tw-text-white" data-accordion-icon>
                <span data-accordion-icon-closed>{% render 'icon-plus', width: 14, height: 14 %}</span>
                <span data-accordion-icon-open hidden>{% render 'icon-minus', width: 14, height: 3 %}</span>
              </span>
            </div>

            <div class="panel tw-bg-gray-100 tw-text-black">
              {% for child_link in link.links %}
                {% if child_link.links.size == 0 %}
                  <a href="{{ child_link.url }}" class="tw-flex tw-justify-between tw-items-center tw-p-4 tw-bg-gray-100 tw-text-black tw-no-underline">
                    <span>{{ child_link.title }}</span>
                    <span class="tw-inline-flex tw-text-current">{% render 'icon-chevron-right', width: 14, height: 14 %}</span>
                  </a>
                {% else %}
                  <div
                      class="my-accordion tw-w-full tw-text-left tw-flex tw-justify-between tw-items-center tw-p-4 tw-bg-gray-100 tw-text-black">
                    <span>{{ child_link.title }}</span>
                    <span class="tw-inline-flex tw-text-current" data-accordion-icon>
                      <span data-accordion-icon-closed>{% render 'icon-plus', width: 14, height: 14 %}</span>
                      <span data-accordion-icon-open hidden>{% render 'icon-minus', width: 14, height: 3 %}</span>
                    </span>
                  </div>

                  <div class="panel tw-bg-white tw-grid tw-grid-cols-2">
                    {% for grand_child_link in child_link.links %}
                      <a href="{{ grand_child_link.url }}" class="tw-block tw-p-4 tw-no-underline tw-text-current">
                        <span>{{ grand_child_link.title }}</span>
                        <span class="tw-inline-flex tw-text-current">{% render 'icon-chevron-right', width: 14, height: 14 %}</span>
                      </a>
                    {% endfor %}
                  </div>
                {% endif %}
              {% endfor %}
            </div>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  </my-accordion>
</div>
<!-- SP ナビメニュー end -->
